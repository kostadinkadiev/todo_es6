{"version":3,"sources":["es6/todostore.js"],"names":[],"mappings":"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","file":"es6/todostore.js","sourcesContent":["import {Injectable} from 'angular2/angular2';\r\nimport ToDo from './todo';\r\n\r\n\r\nclass ToDoStore {\r\n\r\n\tconstructor() {\r\n\t\tthis.toDos = new Map(store.get('es6-todos')) || new Map();\r\n\r\n\t\tfor(let [key, value] of this.toDos.entries())\r\n\t\t{\r\n\t\t\tthis.toDos.get(key).dueDate = new Date(this.toDos.get(key).dueDate);\r\n\t\t}\r\n\r\n\t\tthis.reOrderToDos();\r\n  \t}\r\n\r\n  \tupdateStore() {\r\n\t\tstore.set('es6-todos', this.toDos);\r\n\t\tthis.reOrderToDos();\r\n\t}\r\n\r\n  \tadd(text, date) {\r\n\r\n  \t\tlet dateParts = date.split('.');\r\n  \t\tlet newDate = new Date(dateParts[2], dateParts[1] - 1, dateParts[0], \r\n  \t\t\t0, 0, 0);\r\n\r\n\t\tlet todo = new ToDo(text, false, false, newDate);\r\n\t\tthis.toDos.set(uuid.v4(), todo);\r\n\t\tthis.updateStore();\r\n\t}\r\n\r\n\tremove(id) {\r\n\t\tthis.toDos.delete(id);\r\n\t\tthis.updateStore();\r\n\t}\r\n\r\n\tget(isDone) {\r\n\t\treturn [...this.toDos.values()].filter(v => v.isDone === isDone);\r\n\t}\r\n\r\n\ttoggleAllTo(isDone) {\r\n\t\tthis.toDos.forEach((v) => v.isDone = isDone);\r\n\t\tthis.updateStore();\r\n\t}\r\n\r\n\ttoggleDone(id) {\r\n\t\tlet todo = this.toDos.get(id);\r\n\t\ttodo.isDone = !todo.isDone;\r\n\t\tthis.updateStore();\r\n\t}\r\n\r\n\tremoveDone() {\r\n\r\n\t\tfor(let [key, value] of this.toDos.entries())\r\n\t\t{\r\n\t\t\tif(value.isDone) {\r\n\t\t\t\tthis.toDos.delete(key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.updateStore();\r\n\t}\r\n\r\n\tgetNotDone() {\r\n\t\treturn this.get(false);\r\n\t}\r\n\r\n\tgetDone() {\r\n\t\treturn this.get(true);\r\n\t}\r\n\r\n\tareAllDone() {\r\n\t\treturn this.toDos.size === this.getDone().length;\r\n\t}\r\n\r\n\treOrderToDos() {\r\n\t    this.toDos = new Map([...this.toDos.entries()]\r\n\t      .sort((a,b) => a[1].dueDate - b[1].dueDate));\r\n  \t}\r\n}\r\n\r\nToDoStore.annotations = [\r\n  new Injectable()\r\n];\r\n\r\nexport default ToDoStore;"]}